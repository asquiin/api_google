{"ast":null,"code":"import _slicedToArray from\"/Users/amerkanovaasel/Desktop/pr/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import noImage from\"../../img/noImage.jpg\";import{NavLink}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{loadMoreBooks,startSearchBook}from\"../../redux/resultReducer\";import Error from\"../Error/Error\";import\"./Results.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Results=function Results(){var dispatch=useDispatch();var searchString=useSelector(function(state){return state.header.newSearchString;});var orderBy=useSelector(function(state){return state.header.orderBy;});var category=useSelector(function(state){return state.header.category;});var results=useSelector(function(state){return state.searchResult.results;});var totalItems=useSelector(function(state){return state.searchResult.totalItems;});var isFetching=useSelector(function(state){return state.searchResult.isFetching;});var isFetchError=useSelector(function(state){return state.searchResult.isFetchError;});var _useState=useState(30),_useState2=_slicedToArray(_useState,2),booksCount=_useState2[0],increaseBooksCount=_useState2[1];useEffect(function(){dispatch(startSearchBook(searchString,orderBy,category));},[searchString,orderBy,category]);var onLoadMoreButton=function onLoadMoreButton(){dispatch(loadMoreBooks(booksCount,results,searchString));increaseBooksCount(booksCount+30);};return/*#__PURE__*/_jsxs(_Fragment,{children:[isFetching?/*#__PURE__*/_jsx(\"div\",{className:\"forLoader\",children:/*#__PURE__*/_jsx(\"span\",{className:\"loader\"})}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"books_container\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h2\",{className:\"how_much_found\",children:[\"Found \",totalItems,\" results\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"books_row\",children:results.map(function(b){return/*#__PURE__*/_jsx(\"div\",{className:\"books_items\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/bookCard/\"+b.id,className:\"navbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"book_item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"book_img\",children:/*#__PURE__*/_jsx(\"img\",{src:b.volumeInfo.imageLinks!=null?b.volumeInfo.imageLinks.smallThumbnail:noImage})}),/*#__PURE__*/_jsxs(\"div\",{className:\"book_info\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Category:\",/*#__PURE__*/_jsx(\"span\",{className:\"book_category\",children:b.volumeInfo.categories!=null?b.volumeInfo.categories[0]:\"Неизвестно\"})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"book_name\",children:[\" \",b.volumeInfo.title,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Author:\",/*#__PURE__*/_jsx(\"span\",{className:\"book_authors\",children:b.volumeInfo.authors!=null?b.volumeInfo.authors:\"Неизвестно\"})]})]})]})})});})}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",children:totalItems>results.length?/*#__PURE__*/_jsx(\"button\",{className:\"load_more_button\",onClick:function onClick(){onLoadMoreButton();},children:\"Load more\"}):booksCount==0})]}),isFetchError?/*#__PURE__*/_jsx(Error,{}):null]});};export default Results;","map":{"version":3,"sources":["/Users/amerkanovaasel/Desktop/pr/src/pages/Results/Results.js"],"names":["React","useEffect","useState","noImage","NavLink","useDispatch","useSelector","loadMoreBooks","startSearchBook","Error","Results","dispatch","searchString","state","header","newSearchString","orderBy","category","results","searchResult","totalItems","isFetching","isFetchError","booksCount","increaseBooksCount","onLoadMoreButton","map","b","id","volumeInfo","imageLinks","smallThumbnail","categories","title","authors","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport noImage from \"../../img/noImage.jpg\";\nimport { NavLink } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  loadMoreBooks,\n  startSearchBook,\n} from \"../../redux/resultReducer\";\nimport Error from \"../Error/Error\";\nimport \"./Results.css\";\n\nconst Results = () => {\n  const dispatch = useDispatch();\n  const searchString = useSelector((state) => state.header.newSearchString);\n  const orderBy = useSelector((state) => state.header.orderBy);\n  const category = useSelector((state) => state.header.category);\n  const results = useSelector((state) => state.searchResult.results);\n  const totalItems = useSelector((state) => state.searchResult.totalItems);\n  const isFetching = useSelector((state) => state.searchResult.isFetching);\n  const isFetchError = useSelector((state) => state.searchResult.isFetchError);\n\n  let [booksCount, increaseBooksCount] = useState(30);\n\n  useEffect(() => {\n    dispatch(startSearchBook(searchString, orderBy, category));\n  }, [searchString, orderBy, category]);\n\n  let onLoadMoreButton = () => {\n    dispatch(loadMoreBooks(booksCount, results, searchString));\n    increaseBooksCount(booksCount + 30);\n  };\n\n  return (\n    <>\n      {isFetching ? (\n        <div className=\"forLoader\">\n          <span className=\"loader\"></span>\n        </div>\n      ) : null}\n\n      <div className=\"books_container\">\n        <div>\n          <h2 className=\"how_much_found\">Found {totalItems} results</h2>\n        </div>\n        <div className=\"books_row\">\n          {results.map((b) => (\n            <div className=\"books_items\">\n              <NavLink to={\"/bookCard/\" + b.id} className=\"navbar\">\n                <div className=\"book_item\">\n                  <div className=\"book_img\">\n                    <img\n                      src={\n                        b.volumeInfo.imageLinks != null\n                          ? b.volumeInfo.imageLinks.smallThumbnail\n                          : noImage\n                      }\n                    ></img>\n                  </div>\n                  <div className=\"book_info\">\n                    <h5>\n                      Category:\n                      <span className=\"book_category\">\n                        {b.volumeInfo.categories != null\n                          ? b.volumeInfo.categories[0]\n                          : \"Неизвестно\"}\n                      </span>\n                    </h5>\n                    <h1 className=\"book_name\"> {b.volumeInfo.title} </h1>\n                    <p>\n                      Author:\n                      <span className=\"book_authors\"> \n                      {b.volumeInfo.authors != null\n                        ? b.volumeInfo.authors\n                        : \"Неизвестно\"}\n                        </span>\n                    </p>\n                  </div>\n                </div>\n              </NavLink>\n            </div>\n          ))}\n        </div>\n        <div className=\"button\">\n          {totalItems > results.length ? (\n            <button\n              className=\"load_more_button\"\n              onClick={() => {\n                onLoadMoreButton();\n              }}\n            >\n              Load more\n            </button>\n          ) : (\n            booksCount == 0\n          )}\n        </div>\n      </div>\n\n      {isFetchError ? <Error /> : null}\n    </>\n  );\n};\n\nexport default Results;\n"]},"metadata":{},"sourceType":"module"}