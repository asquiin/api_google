{"ast":null,"code":"import _asyncToGenerator from\"/Users/amerkanovaasel/Desktop/pr/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/amerkanovaasel/Desktop/pr/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/amerkanovaasel/Desktop/pr/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/amerkanovaasel/Desktop/pr/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";var instance=axios.create({baseURL:\"https://www.googleapis.com/books/v1/volumes\"});export var bookAPI={searchBook:function searchBook(searchString,orderBy,category){if(category!=''){return instance.get(\"?maxResults=30&orderBy=\".concat(orderBy,\"&q=\").concat(searchString+'+subject:'+category+'&key=AIzaSyBSdsuDMR2_8Rj8oSkDhvYfilF5gPz4e5A'));}else{return instance.get(\"?maxResults=30&orderBy=\".concat(orderBy,\"&q=\").concat(searchString+'&key=AIzaSyBSdsuDMR2_8Rj8oSkDhvYfilF5gPz4e5A'));}},showBookCard:function showBookCard(userId){return instance.get('/'+userId+'?'+'&key=AIzaSyBSdsuDMR2_8Rj8oSkDhvYfilF5gPz4e5A');},loadMoreButton:function loadMoreButton(booksCount,searchString){return instance.get(\"?maxResults=30&startIndex=\".concat(booksCount,\"&q=\").concat(searchString));}};var LOAD_BOOK='LOAD-BOOK';var LOAD_SEARCH_RESULTS='LOAD-SEARCH-RESULTS';var SET_TOTAL_ITEMS='SET-TOTAL-ITEMS';var TOGGLE_IS_FETCHING='TOGGLE-IS-FETCHING';var SET_BOOK_CARD='SET-BOOK-CARD';var LOAD_MORE='LOAD-MORE';var SET_FETCH_ERROR='SET_FETCH_ERROR';var CLEAN_RESULTS='CLEAN-RESULTS';var initialState={results:[],totalItems:0,isFetching:true,bookCard:null,isFetchError:false};var resultReducer=function resultReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case LOAD_BOOK:{return _objectSpread({},state);}case LOAD_SEARCH_RESULTS:{return _objectSpread(_objectSpread({},state),{},{results:action.results});}case SET_TOTAL_ITEMS:{return _objectSpread(_objectSpread({},state),{},{totalItems:action.totalItems});}case TOGGLE_IS_FETCHING:{return _objectSpread(_objectSpread({},state),{},{isFetching:action.isFetching});}case SET_BOOK_CARD:{return _objectSpread(_objectSpread({},state),{},{bookCard:action.bookCard});}case LOAD_MORE:{return _objectSpread(_objectSpread({},state),{},{results:[].concat(_toConsumableArray(state.results),_toConsumableArray(action.moreBooks))});}case SET_FETCH_ERROR:{return _objectSpread(_objectSpread({},state),{},{isFetchError:action.isError});}case CLEAN_RESULTS:{return _objectSpread(_objectSpread({},state),{},{results:[]});}default:return state;}};export var loadBook=function loadBook(){return{type:LOAD_BOOK};};export var loadSearchResults=function loadSearchResults(results){return{type:LOAD_SEARCH_RESULTS,results:results};};export var setTotalItems=function setTotalItems(totalItems){return{type:SET_TOTAL_ITEMS,totalItems:totalItems};};export var toggleIsFetching=function toggleIsFetching(isFetching){return{type:TOGGLE_IS_FETCHING,isFetching:isFetching};};export var setBookCard=function setBookCard(bookCard){return{type:SET_BOOK_CARD,bookCard:bookCard};};export var loadMore=function loadMore(moreBooks){return{type:LOAD_MORE,moreBooks:moreBooks};};export var setFetchError=function setFetchError(isError){return{type:SET_FETCH_ERROR,isError:isError};};export var cleanResults=function cleanResults(){return{type:CLEAN_RESULTS};};export var startSearchBook=function startSearchBook(searchString,orderBy,category){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch(setFetchError(false));dispatch(toggleIsFetching(true));_context.next=5;return bookAPI.searchBook(searchString,orderBy,category);case 5:response=_context.sent;dispatch(toggleIsFetching(false));dispatch(setTotalItems(response.data.totalItems));if(response.data.totalItems!=0){dispatch(loadSearchResults(response.data.items));}else{dispatch(cleanResults());}_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);dispatch(setFetchError(true));dispatch(toggleIsFetching(false));case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getBookCard=function getBookCard(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch(setFetchError(false));_context2.next=4;return bookAPI.showBookCard(userId);case 4:response=_context2.sent;dispatch(setBookCard(response.data));_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);dispatch(setFetchError(true));dispatch(toggleIsFetching(false));case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var loadMoreBooks=function loadMoreBooks(booksCount,previousState,searchString){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch(setFetchError(false));_context3.next=4;return bookAPI.loadMoreButton(booksCount,searchString);case 4:response=_context3.sent;dispatch(loadMore(response.data.items,previousState));_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);dispatch(setFetchError(true));dispatch(toggleIsFetching(false));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default resultReducer;","map":{"version":3,"sources":["/Users/amerkanovaasel/Desktop/pr/src/redux/resultReducer.js"],"names":["axios","instance","create","baseURL","bookAPI","searchBook","searchString","orderBy","category","get","showBookCard","userId","loadMoreButton","booksCount","LOAD_BOOK","LOAD_SEARCH_RESULTS","SET_TOTAL_ITEMS","TOGGLE_IS_FETCHING","SET_BOOK_CARD","LOAD_MORE","SET_FETCH_ERROR","CLEAN_RESULTS","initialState","results","totalItems","isFetching","bookCard","isFetchError","resultReducer","state","action","type","moreBooks","isError","loadBook","loadSearchResults","setTotalItems","toggleIsFetching","setBookCard","loadMore","setFetchError","cleanResults","startSearchBook","dispatch","response","data","items","getBookCard","loadMoreBooks","previousState"],"mappings":"keAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,QAAQ,CAAGD,KAAK,CAACE,MAAN,CAAa,CAC1BC,OAAO,CAAE,6CADiB,CAAb,CAAjB,CAIA,MAAO,IAAMC,CAAAA,OAAO,CAAG,CACnBC,UADmB,qBACRC,YADQ,CACMC,OADN,CACeC,QADf,CACyB,CACxC,GAAIA,QAAQ,EAAI,EAAhB,CAAoB,CAChB,MAAOP,CAAAA,QAAQ,CAACQ,GAAT,kCAAuCF,OAAvC,eAAqDD,YAAD,CAAiB,WAAjB,CAAgCE,QAAhC,CAA4C,8CAAhG,EAAP,CACH,CAFD,IAEO,CACH,MAAOP,CAAAA,QAAQ,CAACQ,GAAT,kCAAuCF,OAAvC,eAAqDD,YAAD,CAAiB,8CAArE,EAAP,CACH,CACJ,CAPkB,CASnBI,YATmB,uBASNC,MATM,CASE,CACjB,MAAOV,CAAAA,QAAQ,CAACQ,GAAT,CAAa,IAAME,MAAN,CAAe,GAAf,CAAqB,8CAAlC,CAAP,CACH,CAXkB,CAanBC,cAbmB,yBAaJC,UAbI,CAaQP,YAbR,CAasB,CACrC,MAAOL,CAAAA,QAAQ,CAACQ,GAAT,qCAA0CI,UAA1C,eAA2DP,YAA3D,EAAP,CACH,CAfkB,CAAhB,CAkBP,GAAMQ,CAAAA,SAAS,CAAG,WAAlB,CACA,GAAMC,CAAAA,mBAAmB,CAAG,qBAA5B,CACA,GAAMC,CAAAA,eAAe,CAAG,iBAAxB,CACA,GAAMC,CAAAA,kBAAkB,CAAG,oBAA3B,CACA,GAAMC,CAAAA,aAAa,CAAG,eAAtB,CACA,GAAMC,CAAAA,SAAS,CAAG,WAAlB,CACA,GAAMC,CAAAA,eAAe,CAAG,iBAAxB,CACA,GAAMC,CAAAA,aAAa,CAAG,eAAtB,CAEA,GAAIC,CAAAA,YAAY,CAAG,CACfC,OAAO,CAAE,EADM,CAEfC,UAAU,CAAE,CAFG,CAGfC,UAAU,CAAE,IAHG,CAIfC,QAAQ,CAAE,IAJK,CAKfC,YAAY,CAAE,KALC,CAAnB,CAQA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBP,YAAyB,IAAXQ,CAAAA,MAAW,2CACpD,OAAQA,MAAM,CAACC,IAAf,EAEI,IAAKjB,CAAAA,SAAL,CAAgB,CACZ,wBACOe,KADP,EAGH,CACD,IAAKd,CAAAA,mBAAL,CAA0B,CACtB,sCACOc,KADP,MAEIN,OAAO,CAAEO,MAAM,CAACP,OAFpB,GAIH,CAED,IAAKP,CAAAA,eAAL,CAAsB,CAClB,sCACOa,KADP,MAEIL,UAAU,CAAEM,MAAM,CAACN,UAFvB,GAIH,CAED,IAAKP,CAAAA,kBAAL,CAAyB,CACrB,sCACOY,KADP,MAEIJ,UAAU,CAAEK,MAAM,CAACL,UAFvB,GAIH,CAED,IAAKP,CAAAA,aAAL,CAAoB,CAChB,sCACOW,KADP,MAEIH,QAAQ,CAAEI,MAAM,CAACJ,QAFrB,GAIH,CAED,IAAKP,CAAAA,SAAL,CAAgB,CACZ,sCACOU,KADP,MAEIN,OAAO,8BAAMM,KAAK,CAACN,OAAZ,qBAAwBO,MAAM,CAACE,SAA/B,EAFX,GAIH,CAED,IAAKZ,CAAAA,eAAL,CAAsB,CAClB,sCACOS,KADP,MAEIF,YAAY,CAAEG,MAAM,CAACG,OAFzB,GAIH,CAED,IAAKZ,CAAAA,aAAL,CAAoB,CAChB,sCACOQ,KADP,MAEIN,OAAO,CAAE,EAFb,GAIH,CAED,QACI,MAAOM,CAAAA,KAAP,CAzDR,CA2DH,CA5DD,CA8DA,MAAO,IAAMK,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,SAAO,CAAEH,IAAI,CAAEjB,SAAR,CAAP,EAAjB,CACP,MAAO,IAAMqB,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACZ,OAAD,QAAc,CAAEQ,IAAI,CAAEhB,mBAAR,CAA6BQ,OAAO,CAAPA,OAA7B,CAAd,EAA1B,CACP,MAAO,IAAMa,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACZ,UAAD,QAAiB,CAAEO,IAAI,CAAEf,eAAR,CAAyBQ,UAAU,CAAVA,UAAzB,CAAjB,EAAtB,CACP,MAAO,IAAMa,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACZ,UAAD,QAAiB,CAAEM,IAAI,CAAEd,kBAAR,CAA4BQ,UAAU,CAAVA,UAA5B,CAAjB,EAAzB,CACP,MAAO,IAAMa,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACZ,QAAD,QAAe,CAAEK,IAAI,CAAEb,aAAR,CAAuBQ,QAAQ,CAARA,QAAvB,CAAf,EAApB,CACP,MAAO,IAAMa,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACP,SAAD,QAAgB,CAAED,IAAI,CAAEZ,SAAR,CAAmBa,SAAS,CAATA,SAAnB,CAAhB,EAAjB,CACP,MAAO,IAAMQ,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACP,OAAD,QAAc,CAAEF,IAAI,CAAEX,eAAR,CAAyBa,OAAO,CAAPA,OAAzB,CAAd,EAAtB,CACP,MAAO,IAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,SAAO,CAAEV,IAAI,CAAEV,aAAR,CAAP,EAArB,CAEP,MAAO,IAAMqB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACpC,YAAD,CAAeC,OAAf,CAAwBC,QAAxB,CAAqC,CAChE,+FAAO,iBAAOmC,QAAP,+IAECA,QAAQ,CAACH,aAAa,CAAC,KAAD,CAAd,CAAR,CACAG,QAAQ,CAACN,gBAAgB,CAAC,IAAD,CAAjB,CAAR,CAHD,sBAIsBjC,CAAAA,OAAO,CAACC,UAAR,CAAmBC,YAAnB,CAAiCC,OAAjC,CAA0CC,QAA1C,CAJtB,QAIKoC,QAJL,eAKCD,QAAQ,CAACN,gBAAgB,CAAC,KAAD,CAAjB,CAAR,CACAM,QAAQ,CAACP,aAAa,CAACQ,QAAQ,CAACC,IAAT,CAAcrB,UAAf,CAAd,CAAR,CACA,GAAIoB,QAAQ,CAACC,IAAT,CAAcrB,UAAd,EAA4B,CAAhC,CAAmC,CAC/BmB,QAAQ,CAACR,iBAAiB,CAACS,QAAQ,CAACC,IAAT,CAAcC,KAAf,CAAlB,CAAR,CACH,CAFD,IAEO,CACHH,QAAQ,CAACF,YAAY,EAAb,CAAR,CACH,CAXF,iFAaCE,QAAQ,CAACH,aAAa,CAAC,IAAD,CAAd,CAAR,CACAG,QAAQ,CAACN,gBAAgB,CAAC,KAAD,CAAjB,CAAR,CAdD,qEAAP,+DAiBH,CAlBM,CAoBP,MAAO,IAAMU,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACpC,MAAD,CAAY,CACnC,gGAAO,kBAAOgC,QAAP,oJAECA,QAAQ,CAACH,aAAa,CAAC,KAAD,CAAd,CAAR,CAFD,uBAGsBpC,CAAAA,OAAO,CAACM,YAAR,CAAqBC,MAArB,CAHtB,QAGKiC,QAHL,gBAICD,QAAQ,CAACL,WAAW,CAACM,QAAQ,CAACC,IAAV,CAAZ,CAAR,CAJD,mFAMCF,QAAQ,CAACH,aAAa,CAAC,IAAD,CAAd,CAAR,CACAG,QAAQ,CAACN,gBAAgB,CAAC,KAAD,CAAjB,CAAR,CAPD,sEAAP,iEAUH,CAXM,CAaP,MAAO,IAAMW,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACnC,UAAD,CAAaoC,aAAb,CAA4B3C,YAA5B,CAA6C,CAEtE,gGAAO,kBAAOqC,QAAP,oJAECA,QAAQ,CAACH,aAAa,CAAC,KAAD,CAAd,CAAR,CAFD,uBAGsBpC,CAAAA,OAAO,CAACQ,cAAR,CAAuBC,UAAvB,CAAmCP,YAAnC,CAHtB,QAGKsC,QAHL,gBAICD,QAAQ,CAACJ,QAAQ,CAACK,QAAQ,CAACC,IAAT,CAAcC,KAAf,CAAsBG,aAAtB,CAAT,CAAR,CAJD,mFAMCN,QAAQ,CAACH,aAAa,CAAC,IAAD,CAAd,CAAR,CACAG,QAAQ,CAACN,gBAAgB,CAAC,KAAD,CAAjB,CAAR,CAPD,sEAAP,iEAUH,CAZM,CAcP,cAAeT,CAAAA,aAAf","sourcesContent":["import axios from \"axios\"\n\nconst instance = axios.create({\n    baseURL: \"https://www.googleapis.com/books/v1/volumes\",\n})\n\nexport const bookAPI = {\n    searchBook(searchString, orderBy, category) {\n        if (category != '') {\n            return instance.get(`?maxResults=30&orderBy=${orderBy}&q=${(searchString) + '+subject:' + (category) + '&key=AIzaSyBSdsuDMR2_8Rj8oSkDhvYfilF5gPz4e5A'}`)\n        } else {\n            return instance.get(`?maxResults=30&orderBy=${orderBy}&q=${(searchString) + '&key=AIzaSyBSdsuDMR2_8Rj8oSkDhvYfilF5gPz4e5A'}`)\n        }\n    },\n\n    showBookCard(userId) {\n        return instance.get('/' + userId + '?' + '&key=AIzaSyBSdsuDMR2_8Rj8oSkDhvYfilF5gPz4e5A')\n    },\n\n    loadMoreButton(booksCount, searchString) {\n        return instance.get(`?maxResults=30&startIndex=${booksCount}&q=${(searchString)}`)\n    }\n}\n\nconst LOAD_BOOK = 'LOAD-BOOK';\nconst LOAD_SEARCH_RESULTS = 'LOAD-SEARCH-RESULTS';\nconst SET_TOTAL_ITEMS = 'SET-TOTAL-ITEMS';\nconst TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING';\nconst SET_BOOK_CARD = 'SET-BOOK-CARD';\nconst LOAD_MORE = 'LOAD-MORE';\nconst SET_FETCH_ERROR = 'SET_FETCH_ERROR';\nconst CLEAN_RESULTS = 'CLEAN-RESULTS';\n\nlet initialState = {\n    results: [],\n    totalItems: 0,\n    isFetching: true,\n    bookCard: null,\n    isFetchError: false,\n};\n\nconst resultReducer = (state = initialState, action) => {\n    switch (action.type) {\n\n        case LOAD_BOOK: {\n            return {\n                ...state,\n            };\n        }\n        case LOAD_SEARCH_RESULTS: {\n            return {\n                ...state,\n                results: action.results,\n            }\n        }\n\n        case SET_TOTAL_ITEMS: {\n            return {\n                ...state,\n                totalItems: action.totalItems,\n            }\n        }\n\n        case TOGGLE_IS_FETCHING: {\n            return {\n                ...state,\n                isFetching: action.isFetching,\n            }\n        }\n\n        case SET_BOOK_CARD: {\n            return {\n                ...state,\n                bookCard: action.bookCard,\n            }\n        }\n\n        case LOAD_MORE: {\n            return {\n                ...state,\n                results: [...state.results, ...action.moreBooks],\n            }\n        }\n\n        case SET_FETCH_ERROR: {\n            return {\n                ...state,\n                isFetchError: action.isError,\n            }\n        }\n\n        case CLEAN_RESULTS: {\n            return {\n                ...state,\n                results: [],\n            }\n        }\n\n        default:\n            return state;\n    }\n}\n\nexport const loadBook = () => ({ type: LOAD_BOOK });\nexport const loadSearchResults = (results) => ({ type: LOAD_SEARCH_RESULTS, results });\nexport const setTotalItems = (totalItems) => ({ type: SET_TOTAL_ITEMS, totalItems });\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, isFetching });\nexport const setBookCard = (bookCard) => ({ type: SET_BOOK_CARD, bookCard });\nexport const loadMore = (moreBooks) => ({ type: LOAD_MORE, moreBooks });\nexport const setFetchError = (isError) => ({ type: SET_FETCH_ERROR, isError })\nexport const cleanResults = () => ({ type: CLEAN_RESULTS, })\n\nexport const startSearchBook = (searchString, orderBy, category) => {\n    return async (dispatch) => {\n        try {\n            dispatch(setFetchError(false));\n            dispatch(toggleIsFetching(true));\n            let response = await bookAPI.searchBook(searchString, orderBy, category);\n            dispatch(toggleIsFetching(false));\n            dispatch(setTotalItems(response.data.totalItems));\n            if (response.data.totalItems != 0) {\n                dispatch(loadSearchResults(response.data.items));\n            } else {\n                dispatch(cleanResults());\n            }\n        } catch (e) {\n            dispatch(setFetchError(true));\n            dispatch(toggleIsFetching(false));\n        }\n    }\n}\n\nexport const getBookCard = (userId) => {\n    return async (dispatch) => {\n        try {\n            dispatch(setFetchError(false));\n            let response = await bookAPI.showBookCard(userId);\n            dispatch(setBookCard(response.data));\n        } catch (e) {\n            dispatch(setFetchError(true));\n            dispatch(toggleIsFetching(false));\n        }\n    };\n}\n\nexport const loadMoreBooks = (booksCount, previousState, searchString) => {\n\n    return async (dispatch) => {\n        try {\n            dispatch(setFetchError(false));\n            let response = await bookAPI.loadMoreButton(booksCount, searchString);\n            dispatch(loadMore(response.data.items, previousState));\n        } catch (e) {\n            dispatch(setFetchError(true));\n            dispatch(toggleIsFetching(false));\n        }\n    }\n}\n\nexport default resultReducer;\n\n"]},"metadata":{},"sourceType":"module"}